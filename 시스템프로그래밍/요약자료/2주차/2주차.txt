2-1

open() 파일을 열거나 생성할 때 사용
creat() 파일을 생성할 때 쓰임
fcntl() 파일 컨트롤 시스템의 약어, 파일에 관련된 속성을 제어
close() 파일에 관련된 작업을 끝냈다는 것을 시스템에 알림
read() 파일 기술자(fd)에 연결된 파일로부터 n바이트를 읽고 데이터 영역 buf에 데이터를 저장
lseek() 파일 안의 지정된 위치로 이동 즉 파일에 대한 임의 접근이 가능
ex) lseek(infile, -2, SEEK_END); seek_end는 파일의 끝으로 포인터를 이동하는 start_flag, 파일에 끝에서 -2 만큼 이동
F_GETLK 잠금을 얻을 수 없도록 제어하는 flock 구조로 리턴하는 구문
ex) int fcntl(int fd, int cmd, struct flock *lock);으로 선언
unlink() 파일을 제거
write() 파일로부터 임의의 수 문자나 바이트를 호출 프로그램의 제어 하에 있는 버퍼로 작성
fd 파일 기술자
buf 쓰여질 데이터에 대한 포인터

시스템 호출
UNIX 커널에 의해 제공된 I/O 장치에 직접 접근을 제공하는 시스템 호출들의 집합
접근 후 수정, 삭제, 추가, 복사 등의 명령을 수행
대표적인 것으로 OPEN(), CREAT(), READ(), WRITE(), FCNTL(), LSEEK()등이 있음

2-2

1) Link

Symbolic link 서로 다른 inode를 가지는 파일
Hard link 서로 같은 inode를 가리키는 파일

2) Unlink

파일 시스템에서 pathname 이름을 가진 파일을 지움
Symbolic link의 경우 연결이 제거

3) 디렉토리 트리

나뭇가지와 같은 계층 구조를 가짐
여러가지 목적에 라맞게 디렉토리 구조를 분할

디렉토리 관련 시스템 콜

1) readdir

개방된 디렉토리로부터 디렉토리 항을 읽어옴
주로 opendir로 개방한 디렉토리를 읽을 때 사용

2) rewinddir

개방한 디렉토리 파일에서 읽기 포인터의 위치를 초기화 하는 함수
읽기 포인터는 디렉토리 항 단위로 이동

3) chdir

작업 디렉토리를 인자로 받은 디렉토리 위치로 바꾸어 주는 함수
fchdir은 열려져 있는 파일 기술자가 인수로 주어짐

2-3

유닉스 파일 시스템의 개요

DOS와 같이 계층적인 트리 구조의 파일 시스템으로 구성

상,하위 등의 등급을 매긴 범주로 조작된 시스템
파일들을 가장 적절한 곳에 알기 쉽게 위치
사용자가 원하는 곳에 원하는 파일을 위치시킬 수 있도록 구성

Unix는 모든 것을 파일로 취급

DOS와 Unix 비교

DOS는 파일의 확장자에 의해 파일의 유형 구분이 가능하지만
Unix는 파일의 확장자에 의해 파일의 유형 구분이 불가능하다.
하지만 응용 프로그램에서 필요에 따라 파일의 유형 구분이 가능하다.

또, DOS에서는 구분 없이 길게 부여 할 수 없고 '.'을 파일명에 여러번 사용할 수 없지만
Unix에서는 구분 없이 길게 부여 가능하고 파일명의 어디에나 여러번 사용 가능하다.

Unix 파일명 특징

거의 모든 문자가 파일명으로 쓰일 수 있지만 선택하는 것이 혼란을 방지한다.
루트 디렉토리는 항상 /로 이름이 정해져 있고, 이 문자로 참조한다.
대소문자의 구분을 확실하게 하고.
같은디렉토리 안에 같은 파일명을 가진 두 개의 파일이 존재할 수 없다.

Unix 시스템 상의 다른 사용자와 파일을 공유할 경우
처음 14문자까지 서로 달라야하며

Unix에서 ls명령으로 볼 수 없는 파일명은 숨겨진 파일이라고 하며
숨겨진 파일을 보기 위해서는 'ls-a'를 이용해야한다.
숨겨진 파일은 파일명이 '.'으로 시작한다.

Unix의 파일 유형

D : 디렉토리 
L : 심볼릭 링크
B : 블록 특수파일
C : 문자 특수파일
P : pipe 특수파일
- : 일반 파일
I : FIFO

작업 디렉토리 : 현재 사용자가 작업하고 있는 디렉토리
pwd 명령으로 확인 가능. 일반적으로 실행되는 모든 명령어는 현재 작업 디렉토리를 기준으로 실행되며,
다른 디렉토리 안에 있는 파일에 접그하기 위해서는 반드시 경로명도 함께 기술해야함

홈 디렉토리 : Unix 시스템에 처음 로그인 했을 때의 작업 디렉토리
홈 디렉토리의 절대경로명을 보려면 마찬가지로 pwd 명령을 이용

메모리로부터 디스크로의 모든 쓰기와 읽기는 주기억장치의 캐쉬로부터 수행
탑재된 파일 시스템의 슈퍼블록의 복사본이 주기억장치에 저장
어느 순간 디스크의 자료와 주기억장치의 캐쉬에 저장된 내용이 다를 수 있음

요약

파일 시스템 구조

모든것을 파일로 처리
계층적 트리구조

디렉토리
현재 작업이 수행되고 있는 작업 디렉토리
처음 로그인 했을때의 작업 디렉토리 : 홈 디렉토리
. : 자신 디렉토리 .. : 부모 디렉토리

유닉스 장치 파일

stat
stat, fstat 프로그램이 존재하는 파일의 특성을 알 수 있도록 해줌

mount와 unmount
mount : 슈퍼유저가 파일 시스템을 확장 할 수 있는 기능을 수행
unmount : 현재 mount 된 파일 시스템을 해제

